<!-- Consiste en generar un numero aleatoro entre 1 y 100, el usuario tiene 5 oportunidades para divinarlo, cuando falle le dirá si es mayor o menor, y cuando se le acaben las vidas el programa devolverá la solución -->

<!-- 1º Maquetar la pagina -->
<!-- 2º Generar un numero -->
<!-- 3º Recoger el dato introducido y compararlo con la solucion -->
<!-- Si es correcto GIF aplausos -->
<!-- Si es incorrecto GIF fallo, devolver mayor o menor y restar una vida -->
<!-- Si se acaban las vidas GIF fin y devolver la solucion -->

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adivina el numero</title>
    <link rel="stylesheet" href="style.css">

    <script>
        this.onload = carga; //Poner e nombre de la funcion sin parentesis para que llame a la funcion cuando cargue la pagina, si pongo parentesis hace una llamada a la función ahora
        let vidas = 5;
        let respus = [];
        let respus2 = [];

        function carga() {
            let elemento_vidas = document.getElementById("vidas");
            elemento_vidas.innerHTML = vidas;
        }

        function numeroRandom(min, max) { //Funcion que genera un numero aleatorio entre un numero minimo(incluido) y uno maximo) excluido
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function limpiar() { //Funcion para que limpie los campos al cabo de x segundos
            let elemento_imagen = document.getElementById("imagen"); // Primero capturo el campo de texto para la respuesta y la imagen
            let elemento_respuesta = document.getElementById("texto_respuesta");
            elemento_imagen.src = "https://programacionsiemens.com/wp-content/uploads/2013/05/error.jpg";
            elemento_respuesta.innerHTML = "";

        }

        let numeroAdivinar = numeroRandom(1, 101); //pongo 101 porque el maximo esta excluido
        console.log(numeroAdivinar);

        function fallo(pFallo) {
            let elemento_vidas = document.getElementById("vidas");
            console.log(vidas);
            elemento_vidas.innerHTML = vidas; //Mostramos las vidas restantes

            let elemento_imagen = document.getElementById("imagen"); // Primero capturo el campo de texto para la respuesta y la imagen
            let elemento_respuesta = document.getElementById("texto_respuesta");

            if (pFallo == "menor") {
                elemento_imagen.src = "https://www.flaticon.es/svg/static/icons/svg/2026/2026655.svg";
                elemento_respuesta.innerHTML = "¡¡¡¡FALLO!!!!  El numero es menor";
                setTimeout(limpiar, 2000);
            } else {
                elemento_imagen.src = "https://www.flaticon.es/svg/static/icons/svg/2026/2026659.svg";
                elemento_respuesta.innerHTML = "¡¡¡¡FALLO!!!!  El numero es mayor";
                setTimeout(limpiar, 2000);
            }

        }

        function acierto() {
            console.log("¡¡¡¡¡¡ACIERTO!!!!!!");
            let elemento_imagen = document.getElementById("imagen"); // Primero capturo el campo de texto para la respuesta y la imagen
            let elemento_respuesta = document.getElementById("texto_respuesta");
            elemento_imagen.src = "https://franciscotorreblanca.es/wp-content/uploads/2017/02/prejuicios-marketing-falacias-francisco-torreblanca-23.jpg/icons/svg/2026/2026655.svg";
            elemento_respuesta.innerHTML = "¡¡¡¡ACIERTO!!!!!";
            setTimeout(volverEmpezar, 5000)
        }


        function calcularRespuesta() {
            let respuesta = document.getElementById("respuesta").value
            console.log(respuesta);
            respus[respus.length] = respuesta;
            console.log(respus);
            if (respuesta == numeroAdivinar) {
                acierto();
            } else {
                if (numeroAdivinar < respuesta) {
                    fallo("menor");
                    console.log("MENOR");
                    respus2[respus2.length] = "↓";
                } else {
                    fallo("mayor");
                    console.log("MAYOR");
                    respus2[respus2.length] = "↑";
                }
                vidas--;
                console.log(respus2);
            }
        }

        function volverEmpezar() { //Funcion que reinicia la partida
            numeroAdivinar = numeroRandom(1, 101)
            console.log("Nuevo numero a adivinar: " + numeroAdivinar);
            vidas = 5;
            respus = [];
            respus2 = [];
            limpiar();
            elemento_vidas = document.getElementById("vidas");
            elemento_vidas.innerHTML = vidas; //Mostramos las vidas restantes
            document.getElementById("respus").innerHTML = "";

        }
    </script>

</head>

<body>

    <div class="container">
        <div class="titulo">
            <h1>JUEGO: Adivina el numero</h1>
        </div>
        <div class="vidas">
            <h1>Vidas: <span id="vidas"></span></h1>
        </div>


    </div>
    <div class="respuesta">
        <label for="respuesta">Introduzca un numero entre 1 y 100:&nbsp;</label>
        <input name="respuesta" id="respuesta" type="number">&nbsp;
        <input type="button" class="boton" value="ADIVINAR" onclick="calcularRespuesta()">
    </div>

    <div class="imagen">
        <img src="https://programacionsiemens.com/wp-content/uploads/2013/05/error.jpg" id="imagen">
        <h1 id="texto_respuesta"></h1>
    </div>
    <div class="respus" id="respus">

    </div>
    <div>
        <input type="button" value="REINICIAR" onclick="volverEmpezar()">
    </div>


</body>

</html>